# 进程

## 1.查询进程

- ps -aux

## 2. 查询父进程

- ps -ef   以全格式显示当前所有进程

## 3. 终止进程

- kill [选项]  进程号  杀死进程

- killall 进程名称 （支持通配符）

- -9 强制停止进程（可以杀死终端）

## 4. 查看进程树

- pstree
  
  - -p -------------显示进程号
  
  - -u -------------显示用户名

## 5. 服务管理

-     服务本质就是进程，但是是运行在后台的，通常会监听某个端口，等待其他程序的请求，比如mysql，sshd， 防火墙等，我们又称之为守护进程

- service管理指令
  
  - service [服务名] [start, stop, restart,  reload, status]
  
  - 在CentOS7.0后很多服务使用systemctl
  
  - service 指令管理的服务在 /etc/init.d 查看
  
  - 用setup看所有的系统服务

- 开机流程
  
  开机 -》 BIOS -》 /boot -》systemd进程（1）-》运行级别 -》 运行对应的服务

- 在/etc/inittab 下可以看运行级别

- systemctl get-default 看当前默认的级别

- systemctl set-default 设置默认运行级别

- init 3  也可以切换到3运行级别

- chkconfig ---------------------------------------给各个运行级别设置自启的服务
  
  - chkconfig --list---------------------------------查看服务在各个级别的情况
  
  - chkconfig --level 运行级别数字 服务名 on/off  ----开启or关闭某个服务在某个运行级别的自启
  
  - 设置完要reboot重启

- systemctl指令
  
  - systemctl [start, stop, restart,  status]  服务名
  
  - systemctl 管理的服务在 /usr/lib/systemd/system 里查看
  
  - systemctl list-unit-files [| grep 服务名]-----------查看服务开机启动的状态,用grep过滤
  
  - systemctl enable 服务名 -----------------------------设置服务开机启动
  
  - systemctl disable 服务名- ----------------------------关闭服务开机启动
  
  - systemctl is-enabled 服务名 --------------------------查询某个服务是否是开机自启的
  
  - telnet  xxxxxxx(ip) xxxx(端口) ----------------------------------访问端口
  
  - firewall-cmd  --permanent  --add-port = 端口号/协议  -----------------------------打开防火墙的端口
  
  - firewall-cmd --permanent --remove-port = 端口号/协议 -----------------------------关闭防火墙的端口
  
  - 重新载入才能生效 --------》 firewall-cmd --reload
  
  - 查询端口是否开放 --------》firewall-cmd --query-port=端口号/协议
  
  - netstat -anp ---------------------------------------------------------查看端口号协议

## 6. 动态监控进程

- top [选项]
  
  - -d  秒数 ------------------------------------------------------------ 指定top命令每隔几秒更新。默认是3s
  
  - -i --------------------------------------------------------------------- 让top不显示任何闲置或僵死进程
  
  - -p ------------------------------------------------------------------ 通过指定监控进程id开监控某个进程的状态

- top交互
  
  - P ------------------------------------------------------------- cpu 使用率排序
  
  - M ----------------------------------------------------------- 内存使用率排序
  
  - N ------------------------------------------------------------ PID排序
  
  - q ------------------------------------------------------------- 退出top
  
  - 输入u 再输入用户名------------------------------------查看用户的进程
  
  - 输入k 再输入id -----------------------------------------杀死进程

- netstat [选项] -----------------------------------------------查看系统网络情况
  
  - -an ------------------------------------------------------按一定顺序排列输出 
  
  - -p -------------------------------------------------------显示那个进程在调用
