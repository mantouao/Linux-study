# 磁盘分区和挂载

### 1. 原理

Linux无论有几个分区，分给哪一个目录使用，归根结底只有一个根目录，一个独立唯一的文件结构，linux中每个分区都是用来组成整个文件系统的一部分

Linux采用了一种叫载入的处理方法，它的整个文件系统中包含了一整套的文件和目录。且将一个分区和一个目录联系起来，这时候要载入的一个分区将使它的存储空间在一个目录下获得

### 2.硬盘

常用的硬盘有IDE（hdx）硬盘和SCSI硬盘（sdx）

### 3.查看设备挂载情况

lsblk或者更详细的lsblk -f

### 4.如何增加一块硬盘

1. 虚拟机添加硬盘

2. 分区
   
   - 分区命令 fdisk /dev/sdb  (对sdb开始分区)
   
   - m ----------------------显示命令列表
   
   - p -----------------------显示磁盘分区（fdisk -l）
   
   - n -----------------------新增分区
   
   - d -----------------------删除分区
   
   - w ----------------------写入并退出

3. 格式化
   
   - 对分区格式化命令  mkfs  -t  ext4  /dev/sdb1

4. 挂载(命令挂载重启会失效)
   
   - mount  设备名称  挂载目录
   
   - mount  /dev/sdb1  /mulu
   
   - umount  设备名称或挂载目录

5. 永久挂载
   
   - 修改 /etc/fstab 实现挂载
   
   - 执行 mount -a 生效

### 5.查询系统整体磁盘使用情况

df  -h

### 6.查询目录磁盘使用情况

du -h

-s  占用大小总汇

-h 带计量单位

-a 含文件

--max-depth=1 子目录深度

-c 列出明细同时增加汇总值

### 7.例子

1. 统计/opt 文件夹下文件的个数
   
   ls -l /opt | grep "^-" | wc -l

2. 统计/opt 文件夹下目录的个数
   
   ls -l /opt | grep "^d" | wc -l

3. 统计/opt 文件夹下文件的个数，含子文件夹
   
   ls -lR /opt | grep "^-" | wc -l

4. 统计/opt 文件夹下目录的个数，含子文件夹

5. ls -lR /opt | grep "^d" | wc -l

6. 以树状显示目录结构（没有tree 使用 yum install tree）
   
   tree /opt/






































